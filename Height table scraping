from urllib.request import urlopen
from bs4 import BeautifulSoup
import re

player_name=[]
player_club=[]
player_height=[]

baselink="https://www.worldfootball.net/players_list/eng-premier-league-2016-2017/nach-mannschaft/"
for i in range(1,13):
    url=baselink
    url=url+str(i)+"/"
    # print(url)
    html = urlopen(url)
    soup = BeautifulSoup(html, 'lxml') #using html.parser instead of lmxl due to parser library issue

    # Finding all <tr> of the table
    rows = soup.find_all('tr')

    for row in rows[2:52]:
        row_td_name = str(row.find_all('td')[0].contents)
        row_td_name=re.sub('<[^>]+>', '', row_td_name).lstrip('[').rstrip(']') #removes HTML tags
        player_name.append(row_td_name)

        row_td_club= str(row.find_all('td')[2].contents)
        row_td_club=re.sub('<[^>]+>', '', row_td_club).lstrip('[').rstrip(']') #removes HTML tags
        player_club.append(row_td_club)

        row_td_height= str(row.find_all('td')[4].contents)
        row_td_height=row_td_height.lstrip('[\'').rstrip('\'] cm') #removes HTML tags. Default unit cm
        player_height.append(row_td_height)

print(player_name)
player_club=list(set(player_club)) #elements getting randomised when converting into set. Have to FIx!!
print(len(player_club))
print(player_height)
